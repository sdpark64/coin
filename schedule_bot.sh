#!/bin/bash

# ==============================================================================
# 봇 재시작 스케줄러
# 날짜: 내일 (tomorrow)
# 경로: /home/ubuntu/coin/binance
# ==============================================================================

# 1. 종료 예약 (내일 08:50:05)
# 주의: 실행 파일명 대소문자(Coin_bot.py)를 정확히 맞춰야 pkill이 작동합니다.
echo "sleep 5; pkill -f coin_bot.py" | at 08:50 tomorrow

# 2. 실행 예약 (내일 09:00:05)
# nohup으로 백그라운드 실행하며, 로그는 output.log에 누적 저장합니다.
echo "sleep 5; cd /home/ubuntu/coin/binance && nohup python3 -u coin_bot.py >> output.log 2>&1 &" | at 09:00 tomorrow

# 3. 예약 결과 확인
echo "-----------------------------------------------------"
echo "✅ 예약이 완료되었습니다. 현재 대기 중인 작업 목록(atq):"
echo "-----------------------------------------------------"
atq
